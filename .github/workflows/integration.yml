on:
  pull_request: {branches: master}
  push: {branches: master}

jobs:
  integration:
    runs-on: ubuntu-latest
    steps:
      - id: output-set
        uses: actions/github-script@master
        with:
          script: return core.getInput('input-value')
          result-encoding: string
          input-value: output
      - run: |
          if [[ "${{steps.output-set.outputs.result}}" != "output" ]]; then
            exit 1
          fi
      - id: file-relative
        uses: actions/github-script@run-file
        with:
          file: __test__/test-output.js
          result-encoding: string
          input-value: output
      - run: |
          if [[ "${{steps.file-relative.outputs.result}}" != "output" ]]; then
            exit 1
          fi
      - id: file-absolute
        uses: actions/github-script@run-file
        with:
          file: ${{github.workspace}}/__test__/test-output.js
          result-encoding: string
          input-value: output
      - run: |
          if [[ "${{steps.file-absolute.outputs.result}}" != "output" ]]; then
            exit 1
          fi
